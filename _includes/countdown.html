<script>
    // 优化倒计时逻辑
    document.addEventListener('DOMContentLoaded', function () {
        const targetDate = new Date('{{ target_date | default: "2027-06-30T00:00:00" }}');
        const timerElement = document.getElementById('timer');

        function updateCountdown() {
            const now = new Date();
            const diff = targetDate - now;

            if (diff <= 0) {
                timerElement.textContent = "The countdown is over!";
                clearInterval(intervalId);
                return;
            }

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            timerElement.innerHTML = `${days}`;
        }

        // 定时更新
        const intervalId = setInterval(updateCountdown, 10000);
        updateCountdown(); // 即刻执行一次，避免等待首个间隔
    });
</script>
